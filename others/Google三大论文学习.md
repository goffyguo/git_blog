<aside> ğŸ’¡ MIT 6824æ˜¯å­¦ä¹ åˆ†å¸ƒå¼å¿…å­¦çš„è¯¾ç¨‹(Robert Morris å½“å¹´å› ä¸ºå‘æ˜è •è™«ç—…æ¯’è€Œè¹²ç›‘ç„¶åå›MITå½“æ•™æˆçš„ç¥äººï¼ï¼ï¼)

</aside>

![image-20211204202718607](imgs/image-20211204202718607.png)

## å†å²èµ·æº

1998å¹´9æœˆ4æ—¥ï¼ŒGoogleå…¬å¸åœ¨ç¾å›½ç¡…è°·æˆç«‹ï¼Œå®ƒæ˜¯ä¸€å®¶åšæœç´¢å¼•æ“èµ·å®¶çš„å…¬å¸ã€‚

æ— ç‹¬æœ‰å¶ï¼Œä¸€ä½åå«Dougâ€‚Cuttingçš„ç¾å›½å·¥ç¨‹å¸ˆï¼Œä¹Ÿè¿·ä¸Šäº†æœç´¢å¼•æ“ã€‚ä»–åšäº†ä¸€ä¸ªç”¨äºæ–‡æœ¬æœç´¢çš„å‡½æ•°åº“ï¼ˆå§‘ä¸”ç†è§£ä¸ºè½¯ä»¶çš„åŠŸèƒ½ç»„ä»¶ï¼‰ï¼Œå‘½åä¸ºLuceneã€‚

è¿™é‡Œè¦è¡¥å……è¯´æ˜ä¸€ä¸‹é›…è™æ‹›å®‰Dougçš„èƒŒæ™¯ï¼š2004å¹´ä¹‹å‰ï¼Œä½œä¸ºäº’è”ç½‘å¼€æ‹“è€…çš„é›…è™ï¼Œæ˜¯ä½¿ç”¨Googleæœç´¢å¼•æ“ä½œä¸ºè‡ªå®¶æœç´¢æœåŠ¡çš„ã€‚åœ¨2004å¹´å¼€å§‹ï¼Œé›…è™æ”¾å¼ƒäº†Googleï¼Œå¼€å§‹è‡ªå·±ç ”å‘æœç´¢å¼•æ“ã€‚æ‰€ä»¥ã€‚ã€‚ã€‚

åŠ ç›ŸYahooä¹‹åï¼ŒDougâ€‚Cuttingå°†NDFSå’ŒMapReduceè¿›è¡Œäº†å‡çº§æ”¹é€ ï¼Œå¹¶é‡æ–°å‘½åä¸º**Hadoop**ï¼ˆNDFSä¹Ÿæ”¹åä¸ºHDFSï¼ŒHadoop Distributed Fileâ€‚Systemï¼‰ã€‚

è¿™ä¸ªï¼Œå°±æ˜¯åæ¥å¤§åé¼é¼çš„å¤§æ•°æ®æ¡†æ¶ç³»ç»Ÿâ€”â€”Hadoopçš„ç”±æ¥ã€‚è€ŒDougâ€‚Cuttingï¼Œåˆ™è¢«äººä»¬ç§°ä¸º**Hadoopä¹‹çˆ¶**ã€‚

ä»¥ä¸Šä¿¡æ¯æ¥è‡ªäº’è”ç½‘

**ä¸‰å¤§è®ºæ–‡æ•´ä½“æ¶æ„**

![image-20211204202741024](imgs/image-20211204202741024.png)

## é‚£äº›å¹´è°·æ­Œå‘å¸ƒçš„è®ºæ–‡

1.æŒ‰æ—¶é—´ç®—ç¬¬ä¸€ç¯‡çš„è®ºæ–‡åº”è¯¥2003å¹´å…¬å¸ƒçš„ **Google File System**ï¼Œè¿™æ˜¯ä¸€ä¸ªå¯æ‰©å±•çš„åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿï¼Œç”¨äºå¤§å‹çš„ã€åˆ†å¸ƒå¼çš„ã€å¯¹å¤§é‡æ•°æ®è¿›è¡Œè®¿é—®çš„åº”ç”¨ã€‚æ–‡ä»¶è¢«åˆ†å‰²æˆå¾ˆå¤šå—ï¼Œä½¿ç”¨å†—ä½™çš„æ–¹å¼å‚¨å­˜äºå•†ç”¨æœºå™¨é›†ç¾¤ä¸Š(åŸºæœ¬ä¸ŠGoogleæ¯ç¯‡è®ºæ–‡éƒ½æ˜¯å…³äºâ€œå•†ç”¨æœºå‹â€)ã€‚

2.2004å¹´å‘å¸ƒçš„çš„ **MapReduce**ç°åœ¨åŸºæœ¬ä¸Šå¯ä»¥ä»£è¡¨å¤§æ•°æ®ã€‚ä¸»è¦æ€æƒ³æ˜¯å°†ä»»åŠ¡åˆ†è§£ç„¶ååœ¨å¤šå°å¤„ç†èƒ½åŠ›è¾ƒå¼±çš„è®¡ç®—èŠ‚ç‚¹ä¸­åŒæ—¶å¤„ç†ï¼Œå°†ç»“æœåˆå¹¶ä»è€Œå®Œæˆå¤§æ•°æ®å¤„ç†ï¼Œä¼ è¯´ä¸­Googleä½¿ç”¨å®ƒè®¡ç®—ä»–ä»¬çš„æœç´¢ç´¢å¼•ã€‚Mikio L. Braun(æŸæ—å·¥ä¸šå¤§å­¦æœºå™¨å­¦ä¹ å­¦åšå£«åï¼ŒTWIMPACTè”åˆåˆ›å§‹äººå…¼é¦–å¸­æ•°æ®ç§‘å­¦å®¶)è®¤ä¸ºå…¶å·¥ä½œæ¨¡å¼åº”è¯¥æ˜¯ï¼šGoogleæŠŠæ‰€æœ‰æŠ“å–çš„é¡µé¢éƒ½æ”¾ç½®äºä»–ä»¬çš„é›†ç¾¤ä¸Šï¼Œå¹¶ä¸”æ¯å¤©éƒ½ä½¿ç”¨MapReduceæ¥é‡ç®—ã€‚

3.**Bigtable**å‘å¸ƒäº2006å¹´ï¼Œå¯å‘äº†æ— æ•°çš„NoSQLæ•°æ®åº“ï¼Œæ¯”å¦‚ï¼šCassandraã€HBaseç­‰ç­‰ã€‚Cassandraæ¶æ„ä¸­æœ‰ä¸€åŠæ˜¯æ¨¡ä»¿Bigtableï¼ŒåŒ…æ‹¬äº†æ•°æ®æ¨¡å‹ã€SSTablesä»¥åŠæå‰å†™æ—¥å¿—ï¼ˆå¦ä¸€åŠæ˜¯æ¨¡ä»¿Amazonçš„Dynamoæ•°æ®åº“ï¼Œä½¿ç”¨ç‚¹å¯¹ç‚¹é›†ç¾¤æ¨¡å¼ï¼‰ã€‚

Googleå¹¶æ²¡æœ‰æ­¢æ­¥äºMapReduceï¼Œäº‹å®ä¸Šï¼Œéšç€Internetçš„æŒ‡æ•°å¢é•¿ï¼Œä»é›¶å¼€å§‹é‡ç®—æ‰€æœ‰æœç´¢ç´¢å¼•å˜å¾—ä¸åˆ‡å®é™…,ä»–ä»¬åœ¨MapReduceä¸é€‚ç”¨çš„åœ°æ–¹å¼€å‘æ–°æ–¹æ³•,å¯¹äºå¤§æ•°æ®é¢†åŸŸæ¥è¯´è¿™æ˜¯ä¸ªç¦éŸ³ã€‚MapReduceä¸æ˜¯ä¸‡èƒ½çš„ã€‚å½“ç„¶ï¼Œä½ å¯ä»¥æ›´æ·±å…¥ä¸€æ­¥ï¼Œæ¯”å¦‚è¯´å°†ç£ç›˜æ•°æ®ç§»å…¥å†…å­˜ï¼Œç„¶è€ŒåŒæ ·è¿˜å­˜åœ¨ä¸€äº›ä»»åŠ¡çš„å†…éƒ¨ç»“æ„å¹¶ä¸æ˜¯MapReduceå¯ä»¥æ‰©å±•çš„ã€‚

4ã€2010å¹´å‘è¡¨çš„ **Percolator**çš„è®ºæ–‡ä¸­ï¼ŒGoogleå±•ç¤ºäº†å…¶ç½‘ç»œæœç´¢æ˜¯å¦‚ä½•ä¿æŒç€ä¸æ—¶ä¿±è¿›ã€‚Percolatorå»ºç«‹äºå·²å­˜ç±»ä¼¼Bigtableçš„æŠ€æœ¯ï¼Œä½†æ˜¯åŠ å…¥äº†äº‹åŠ¡ä»¥åŠè¡Œå’Œè¡¨ä¸Šçš„é”å’Œè¡¨å˜åŒ–çš„é€šçŸ¥ã€‚è¿™äº›é€šçŸ¥ä¹‹åä¼šè¢«ç”¨äºè§¦å‘ä¸åŒé˜¶æ®µçš„è®¡ç®—ã€‚é€šè¿‡è¿™æ ·çš„æ–¹å¼ï¼Œä¸ªä½“çš„æ›´æ–°å°±å¯ä»¥â€œæ¸—é€â€æ•´ä¸ªæ•°æ®åº“ã€‚

5ã€åœ¨2010å¹´ï¼ŒGoogleè¿˜å…¬å¸ƒäº† **Dremel**è®ºæ–‡ã€‚ä¸€ä¸ªä¸ºç»“æ„åŒ–æ•°æ®è®¾è®¡ï¼Œå¹¶æ‹¥æœ‰ç±»SQLè¯­è¨€çš„äº¤äº’å¼æ•°æ®åº“ã€‚ç„¶è€Œå–ä»£SQLæ•°æ®åº“ä½¿ç”¨å­—æ®µå¡«è¡¥çš„è¡¨æ ¼ï¼ŒDremelä¸­ä½¿ç”¨çš„æ˜¯ç±»JSONæ ¼å¼æ•°æ®ï¼ˆæ›´å‡†ç¡®çš„è¯´ï¼Œä½¿ç”¨Google Protocol bufferæ ¼å¼ï¼Œè¿™å°†åŠ å¼ºå¯¹å…è®¸å­—æ®µçš„é™åˆ¶ï¼‰ã€‚å†…éƒ¨ï¼Œæ•°æ®è¢«ä½¿ç”¨ç‰¹æ®Šæ ¼å¼å‚¨å­˜ï¼Œå¯ä»¥è®©æ•°æ®æ‰«æå·¥ä½œæ¥çš„æ›´é«˜æ•ˆã€‚æŸ¥è¯¢è¢«é€å¾€æœåŠ¡å™¨ï¼Œè€Œä¼˜ç§€çš„æ ¼å¼å¯ä»¥æœ€å¤§æ€§èƒ½çš„è¾“å‡ºç»“æœ

6ã€Googleè¿˜éœ€è¦æŒ–æ˜å›¾æ•°æ®ï¼Œæ¯”å¦‚åœ¨çº¿ç¤¾äº¤ç½‘ç»œçš„ç¤¾äº¤å›¾è°±ï¼›æ‰€ä»¥ä»–ä»¬å¼€å‘äº† **Pregel**ï¼Œå¹¶åœ¨2010å¹´å…¬å¸ƒå…¶è®ºæ–‡ã€‚è®ºæ–‡é™ˆè¿°äº†è®¸å¤šç®—æ³•çš„å®ç°ï¼Œæ¯”å¦‚Googleçš„PageRankã€æœ€çŸ­è·¯å¾„ã€äºŒåˆ†å›¾åŒ¹é…ç­‰ã€‚Mikio L. Braunè®¤ä¸ºï¼Œå¯¹æ¯”MapReduceæˆ–SPFï¼ŒPregeléœ€è¦æ›´å¤šå®ç°çš„å†æ€è€ƒã€‚

7ã€Googleåœ¨2009å¹´æå‡ºäº†Spannerè¿œæ™¯è®¡åˆ’ï¼Œå¹¶åœ¨2012å¹´å¯¹å¤–å…¬å¸ƒ**Spannerâ€“å…¨çƒåˆ†å¸ƒå¼æ•°æ®åº“**è®ºæ–‡ã€‚Spannerçš„å…¬å¸ƒå¯ä»¥è¯´æ˜¯Googleå‘å¤§æ•°æ®æŠ€æœ¯ä¸­æ·»çš„åˆä¸€æŠŠç«ï¼ŒSpannerå…·æœ‰é«˜æ‰©å±•æ€§ã€å¤šç‰ˆæœ¬ã€å…¨çƒçº§åˆ†å¸ƒä»¥åŠåŒæ­¥å¤åˆ¶ç­‰ç‰¹æ€§ï¼Œè·¨æ•°æ®ä¸­å¿ƒçš„é«˜æ‰©å±•æ€§åŠå…¨çƒåˆ†å¸ƒä¼šå¯¹ä¸€è‡´æ€§ä¿éšœæå‡ºè‹›åˆ»çš„éœ€æ±‚,è¯»å†™çš„å¤–éƒ¨ä¸€è‡´æ€§å’ŒåŸºäºæ—¶é—´æˆ³çš„å…¨å±€è¯»ä¸€è‡´æ€§ã€‚ä¸ºäº†ä¿éšœè¿™ä¸€ç‚¹ï¼ŒGoogleå¼•å…¥äº†TrueTime APIã€‚TureTime APIå¯ä»¥åŒæ­¥å…¨çƒçš„æ—¶é—´ï¼Œæ‹¥æœ‰ä¸€ä¸ªTT.nowï¼ˆï¼‰çš„æ–¹æ³•ï¼Œå°†è·å¾—ä¸€ä¸ªç»å¯¹æ—¶é—´ï¼ŒåŒæ—¶è¿˜èƒ½å¾—åˆ°æ—¶é—´è¯¯å·®ã€‚ä¸ºäº†ä¿è¯ä¸‡æ— ä¸€å¤±ï¼ŒTrueTime APIå…·æœ‰GPSå’ŒåŸå­é’ŸåŒä¿é™©ã€‚ä¹Ÿåªæœ‰è¿™æ ·çš„æœºåˆ¶æ‰èƒ½è®©å…¨çƒèŒƒå›´å†…çš„å¹¶å‘å¤„ç†å¾—åˆ°ä¿éšœã€‚

åœ¨Googleæ€è·¯ä»¥åŠè®ºæ–‡çš„å¯å‘ä¸‹ï¼ŒåŒæ ·æ¶Œç°å‡ºä¸€äº›å¼€æºé¡¹ç›®ï¼Œæ¯”å¦‚ï¼šApache Drillã€Apache Giraphã€æ–¯å¦ç¦GPSç­‰ç­‰ã€‚

æ–‡ä»¶ç³»ç»Ÿï¼ˆGFSï¼‰â€”> æ•°æ®æ¨¡å‹ï¼ˆBigTableï¼‰â€”> ç®—æ³•ï¼ˆMapReduceï¼‰

## 1ã€GFSï¼ˆThe Google File Systemï¼‰(2003å¹´)

[Google-File-Systemä¸­æ–‡ç‰ˆ_1.0.pdf](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/d0a17540-b0b7-4fd9-958f-522a62566910/Google-File-System_1.0.pdf)

### å‡ºç°èƒŒæ™¯ï¼š

- èƒŒæ™¯1ï¼šåˆ†å¸ƒå¼ç»„ä»¶ç»å¸¸å‘ç”Ÿé”™è¯¯ï¼Œåº”å½“å°†æ­¤è§†ä¸ºå¸¸æ€è€Œä¸æ˜¯æ„å¤–

  ç»„ä»¶ï¼ˆä¹Ÿå°±æ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„ commodity hardwareï¼Œå¯ä»¥ç†è§£ä¸ºé…ç½®ä¸é«˜çš„å•†ç”¨ä¸»æœºï¼‰å‘ç”Ÿé”™è¯¯çš„åŸå› æœ‰å¾ˆå¤šï¼Œæ¯”å¦‚ï¼šåº”ç”¨æˆ–è€…æ“ä½œç³»ç»Ÿ BUGï¼Œäººä¸ºé”™è¯¯ã€ç¡¬ç›˜ã€å†…å­˜ã€ç½‘ç»œç”šè‡³æ˜¯ç”µæºæ•…éšœï¼›

- èƒŒæ™¯2ï¼šæ–‡ä»¶é€šå¸¸æ˜¯å¤§æ–‡ä»¶ï¼Œè€Œä¸æ˜¯å°æ–‡ä»¶

  è¿™é‡Œçš„å¤§æ–‡ä»¶æ˜¯ç›¸å¯¹äºä¼ ç»Ÿæ ‡å‡†è€Œè¨€çš„ï¼Œæ¯”å¦‚ GB åœ¨è¿™å±äºå¤§æ–‡ä»¶ï¼ŒKB çº§åˆ«å±äºå°æ–‡ä»¶ï¼›è®ºæ–‡æŒ‡å‡ºï¼Œåº”å½“æ“ä½œå¤§æ–‡ä»¶è€Œä¸æ˜¯å°æ–‡ä»¶ï¼Œå³ä½¿ç³»ç»Ÿæœ¬èº«æ”¯æŒ billion çº§åˆ«ï¼ˆåäº¿ä¸ªï¼‰çš„ kB å¤§å°çš„æ–‡ä»¶çš„æ“ä½œï¼Œä½†æ˜¯è¿™ç§æ“ä½œä¹Ÿæ˜¯ä¸æ˜æ™ºçš„ï¼Œå› ä¸ºä¼šæ˜æ˜¾å·¨å¤§çš„é¢å¤–å¼€é”€ã€‚

  è¿™æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„å‡è®¾ï¼Œå› ä¸ºåé¢ä¼šæåˆ° GFS ä¸­ç›´æ¥å°† chuksize è®¾ç½®ä¸º 64 MBï¼Œå› ä¸ºæˆ‘ä»¬é¢å¯¹çš„æ˜¯å¤§æ–‡ä»¶ï¼Œå› æ­¤å³ä½¿ä»¥ 64MB è¿™ä¹ˆå¤§çš„ç©ºé—´ä½œä¸ºå­˜å‚¨çš„ç®¡ç†å•å…ƒï¼Œç£ç›˜ç©ºé—´çš„æµªè´¹ä¹Ÿä¸ä¼šå¾ˆä¸¥é‡ã€‚

- èƒŒæ™¯3ï¼šå¤§éƒ¨åˆ†æ–‡ä»¶ï¼ˆä¸»è¦æ˜¯æŒ‡å­—èŠ‚æ•°é‡å æ¯”é«˜ï¼Œè€Œä¸æ˜¯æ“ä½œæ¬¡æ•°ï¼‰é€šè¿‡ appendï¼ˆåœ¨å·²æœ‰çš„æ–‡ä»¶æœ«å°¾è¿½åŠ ï¼‰æ–°æ•°æ®çš„æ–¹å¼å®ç°ä¿®æ”¹ï¼Œè€Œä¸æ˜¯ç›´æ¥é‡å†™ç°æœ‰æ•°æ®

  è¿™æ˜¯åŸºäº Google å¯¹ GFS çš„åº”ç”¨åœºæ™¯çš„åˆ¤æ–­è€Œåšå‡ºçš„èƒŒæ™¯ï¼Œå› ä¸ºå¤§éƒ¨åˆ†æ“ä½œéƒ½æ˜¯ appendï¼Œå› æ­¤ GFS ç³»ç»Ÿä¼˜åŒ–çš„ä¸­å¿ƒä¹Ÿæ”¾åœ¨ record append æ“ä½œä¸Šã€‚è€Œå¯¹äºéšæœºå†™ GFS ä»…ä»…ç»™å‡ºä¸€ä¸ªå­˜åœ¨ä¸ä¸€è‡´æ€§é—®é¢˜çš„è§£å†³æ–¹æ¡ˆã€‚

  æ€»ä¹‹ï¼Œè¿™ç§å‡è®¾ä¸‹ I/O æ“ä½œéƒ½æ˜¯é¡ºåº I/Oï¼Œæ•ˆç‡æ¯”éšæœº I/O é«˜å¾ˆå¤šã€‚

- èƒŒæ™¯4ï¼šååŒè®¾è®¡åº”ç”¨ä»¥åŠæ–‡ä»¶ç³»ç»Ÿå¯ä»¥æé«˜ç³»ç»Ÿæ•´ä½“çµæ´»æ€§ï¼Œæœ€ç»ˆä½¿æ•´ä¸ªç³»ç»Ÿæ”¶ç›Š

### **GFSæ˜¯ä»€ä¹ˆï¼Ÿ**

Google æ–‡ä»¶ç³»ç»Ÿï¼ˆGoogle File Systemï¼Œç¼©å†™ä¸º GFS æˆ– GoogleFSï¼‰ï¼Œä¸€ç§ä¸“æœ‰åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿï¼Œç”± Google å…¬å¸å¼€å‘ï¼Œè¿è¡Œäº Linux å¹³å°ä¸Šã€‚å°½ç®¡ Google åœ¨ 2003 å¹´å…¬å¸ƒäº†è¯¥ç³»ç»Ÿçš„ä¸€äº›æŠ€æœ¯ç»†èŠ‚ï¼Œä½† Google å¹¶æ²¡æœ‰å°†è¯¥ç³»ç»Ÿçš„è½¯ä»¶éƒ¨åˆ†ä½œä¸ºå¼€æºè½¯ä»¶å‘å¸ƒã€‚æ­£æ˜¯å› ä¸ºå¦‚æ­¤ï¼Œç”±é›…è™ç‰µå¤´æ ¹æ® Google ä¸‰ç¯‡è®ºæ–‡åšå‡ºæ¥çš„ Hadoop å¹¶æ²¡æœ‰è¾¾åˆ° Google å®£ç§°çš„é€Ÿåº¦ï¼Œå¯è§åœ¨å¤§æ•°æ®ç›¸å…³é¢†åŸŸï¼Œä¸–ç•Œä¸Šåªæœ‰ Google åœ¨é¢†è·‘ï¼Œå…¶ä»–å…¬å¸éƒ½åªæ˜¯åœ¨é™ªè·‘ã€‚

GFS çš„åœ°ä½ç›¸å½“é«˜ï¼Œæ—©äº›å¹´åŸºäº GFS ç³»ç»Ÿçš„ MapReduce ä»¥åŠ BigTable æ¡†æ¶å®é™…ä¸Šéšç€æ—¶ä»£éƒ½é€æ¸è¢«å–ä»£äº†ï¼Œå¹¶ä¸” MapReduce ä»¥åŠ BigTable ä½œä¸º Google å¤§æ•°æ®ä¸‰é©¾é©¬è½¦çš„åä¸¤ç¯‡è®ºæ–‡ï¼Œä¹Ÿæ²¡æœ‰ GFS é‚£æ ·å†™å¾—è¯¦ç»†ã€‚

### **å‰æä¸å‡è®¾**

- åˆ†å¸ƒç³»ç»Ÿçš„å„ä¸ªç»„ä»¶æ˜¯å»‰ä»·çš„å•†å“ä¸»æœºï¼Œè€Œä¸æ˜¯ä¸“ä¸šæœåŠ¡å™¨ï¼Œå› æ­¤å®ƒä»¬ä¸å¾—ä¸é¢‘ç¹åœ°è‡ªæˆ‘ç›‘æµ‹ã€å‘ç°æ•…éšœï¼Œå¹¶è¢«è¦æ±‚æœ‰ä¸€å®šæ•…éšœå®¹é”™ä¸è‡ªæˆ‘æ•…éšœæ¢å¤èƒ½åŠ›ï¼›

- æ–‡ä»¶æ•°é‡å¤„äºå‡ ç™¾ä¸‡çš„è§„æ¨¡ï¼Œæ¯ä¸€ä¸ªæ–‡ä»¶çš„å¤§å°é€šå¸¸ä¸º 100 MB æˆ–è€…æ›´å¤§ï¼ŒGB ä¹Ÿæ˜¯å¾ˆå¸¸è§çš„æ•°æ®å¤§å°ï¼›æ–‡ä»¶ç³»ç»Ÿè™½ç„¶æ”¯æŒå°æ–‡ä»¶ï¼Œä½†æ˜¯ä¸ä¼šè¿›è¡Œç‰¹æ®Šçš„ä¼˜åŒ–ï¼ˆå› æ­¤ç›´æ¥ä½¿ç”¨ GFS åº”å½“åŸºäºå¤§æ–‡ä»¶çš„åº”ç”¨èƒŒæ™¯ï¼‰ï¼›

- **è¯»å·¥ä½œè´Ÿè½½**ä¸»è¦ç”±ä¸¤ç§è¯»æ–¹å¼æ„æˆï¼šå¤§è§„æ¨¡çš„ä¸²è¡Œè¯»ä»¥åŠå°è§„æ¨¡çš„éšæœºè¯»

  - **å¤§è§„æ¨¡é¡ºåºè¯»**ï¼šé¡ºåºï¼ˆç£ç›˜åœ°å€è¿ç»­åœ°ï¼‰è¯»å–**æ•°ç™¾åŠä»¥ä¸Šä¸ª** KB å¤§å°çš„æ•°æ®ï¼ˆæˆ–è€…å•ä½æ”¹æˆ MBï¼‰ï¼›

  - **å°è§„æ¨¡éšæœºè¯»**ï¼šä»¥ä»»æ„åç§»é‡è¯»å–å‡ ä¸ª KB å¤§å°çš„æ•°æ®ï¼›

    > å°è§„æ¨¡éšæœºè¯»ä¼šæœ‰ä¼˜åŒ–ï¼Œæ¯”å¦‚è¿›è¡Œæ’åºåçš„æ‰¹å¤„ç†åŒ–ï¼Œä»¥ç¨³å®šåœ°éå†æ–‡ä»¶ï¼ˆæ’åºå¯èƒ½æ˜¯æŒ‰ç…§ç´¢å¼•çš„æŒ‡é’ˆå¤§å°ï¼‰ï¼Œè€Œä¸æ˜¯æ¥å›åœ°éšæœºè¯»å–ã€‚

- **å†™å·¥ä½œè´Ÿè½½**ä¸»è¦æ˜¯å¤§è§„æ¨¡çš„ã€è¿ç»­ï¼ˆå³ä¸²è¡Œçš„ï¼‰çš„å†™æ“ä½œï¼Œè¿™äº›æ“ä½œå°†æ•°æ®è¿½åŠ åˆ°æ–‡ä»¶æœ«å°¾ã€‚å†™æ“ä½œçš„è§„æ¨¡é€šå¸¸å’Œå¤§è§„æ¨¡ä¸²è¡Œè¯»çš„è§„æ¨¡ç±»ä¼¼ï¼›

  > è¿™è¦æ±‚ï¼šæ–‡ä»¶ä¸€æ—¦å†™å¥½ï¼Œå°±å‡ ä¹ä¸ä¼šè¿›è¡Œè¦†å†™ï¼Œè™½ç„¶ GFS æ”¯æŒåœ¨æ–‡ä»¶çš„ä»»æ„ä½ç½®è¿›è¡Œä¿®æ”¹ï¼Œä½†æ˜¯å¹¶ä¸ä¼šè¿›è¡Œä¼˜åŒ–ï¼Œå­˜åœ¨å¹¶å‘å®‰å…¨é—®é¢˜ï¼Œå› æ­¤åº”å½“å°½é‡é¿å…ä½¿ç”¨ã€‚

- ç³»ç»Ÿéœ€è¦æ”¯æŒå¹¶å‘å†™ï¼Œå³æ”¯æŒæ•°ç™¾å°æœºå™¨å¹¶å‘åœ°è¿½åŠ æ•°æ®åˆ°ä¸€ä¸ªæ–‡ä»¶ã€‚æ“ä½œçš„åŸå­æ€§å’ŒåŒæ­¥å¼€é”€æ˜¯ä¸»è¦æŒ‡æ ‡ï¼›

- **é«˜æŒç»­å¸¦å®½ï¼ˆHigh sustained bandwidthï¼‰æ¯”ä½å»¶è¿Ÿæ›´é‡è¦**ï¼›

  > å¤§å¤šæ•°çš„åº”ç”¨æ›´å­åœ¨ä¹é«˜é€Ÿç‡åœ°å¤„ç†å¤§é‡æ•°æ®ï¼Œä½†æ˜¯å¾ˆå°‘åº”ç”¨å¯¹å•ä¸ªè¯»å†™æ“ä½œç”±ä¸¥æ ¼çš„å“åº”æ—¶é—´è¦æ±‚ã€‚å‚è€ƒ StackOverflow ç›¸å…³é—®é¢˜çš„å›ç­”ï¼Œæˆ‘ä»¬å¯ä»¥å°†å¸¦å®½å’Œå»¶è¿Ÿç”¨æ¯”å–»çš„æ–¹å¼è¿›è¡Œæ¯”è¾ƒï¼šå¸¦å®½å’Œé«˜é€Ÿå…¬è·¯ä¸Šçš„è½¦é“æ•°æœ‰å…³ï¼Œèƒ½åŒæ—¶è·‘å¤šå°‘é‡è½¦å°±æ˜¯å¸¦å®½ï¼Œå»¶è¿Ÿå’Œè·¯å†µæœ‰å…³ï¼Œå¹³å‡è½¦é€Ÿå°±æ˜¯åœ¨æè¿°å»¶è¿Ÿã€‚å¸¦å®½å’Œå»¶è¿Ÿåç›¸å…³ã€‚å…·ä½“æ¥è¯´ï¼Œä½œä¸ºä¸€ä¸ªæ–‡ä»¶ç®¡ç†ç³»ç»Ÿå¯èƒ½å› ä¸ºæ¶‰åŠå¼‚æ­¥å¼‚åœ°å¤‡ä»½è€Œæ¯”è¾ƒè€—æ—¶ï¼Œå› æ­¤å»¶è¿Ÿæ¯”è¾ƒå¤§ã€‚è€Œå¯¹äºä¸€ä¸ªæ¸¸æˆæœåŠ¡æ¥è¯´ï¼Œå»¶è¿Ÿå°±ä¸èƒ½é«˜ã€‚æ­£æ˜¯å› ä¸ºå¦‚æ­¤ï¼Œä¸€ä¸ªæ–‡ä»¶æœåŠ¡å™¨çš„å¸¦å®½è¢«å ç”¨è¿‡å¤šæ—¶ï¼Œä¸‹è½½æ–‡ä»¶çš„é€Ÿç‡å°±ä¼šæ˜æ˜¾é™ä½ã€‚ä¸€ä¸ªæ¸¸æˆä¸ºäº†ä¿éšœç”¨æˆ·ä½“éªŒï¼Œåœ¨æœåŠ¡å™¨çˆ†æ»¡æ—¶ä¼šé‡‡ç”¨æ’é˜Ÿæœºåˆ¶ï¼Œæ¯”å¦‚ LOL æˆ–è€… WOW æœåŠ¡å™¨åœ¨å‘¨æœ«æ—¶å› ä¸ºåœ¨çº¿ç©å®¶è¾ƒå¤šï¼Œå°±ä¼šå‡ºç°ç™»é™†æ’é˜Ÿï¼Œå¦ä¸€æ–¹é¢ä¼šå›½å†…æ¸¸æˆï¼ˆåŒ…æ‹¬ä»£ç†ï¼‰å¾€å¾€ä¼šæœ‰å¤šä¸ªé¢‘é“æˆ–è€…åŒºçš„æ¦‚å¿µï¼Œç›®çš„éƒ½æ˜¯ä¸ºäº†åˆ†æµã€‚æ€»ä¹‹ç›®çš„éƒ½æ˜¯é¿å…æœåŠ¡å™¨å› ä¸ºå¸¦å®½è¢«å æ»¡å¯¼è‡´æ¸¸æˆå»¶è¿Ÿå¤šå¤§ï¼Œç©å®¶æ¸¸æˆä½“éªŒè¿‡å·®ã€‚

### **GFSæ¶æ„**

è¿™æ˜¯ä¸€ä¸ªå¯æ‰©å±•çš„åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿï¼Œç”¨äºå¤§å‹çš„ã€åˆ†å¸ƒå¼çš„ã€å¯¹å¤§é‡æ•°æ®è¿›è¡Œè®¿é—®çš„åº”ç”¨ã€‚è¿è¡Œä¸å»‰ä»·çš„æ™®é€šç¡¬ä»¶ä¸Šï¼Œæä¾›å®¹é”™åŠŸèƒ½ã€‚

ä»æ ¹æœ¬ä¸Šæ¥è¯´ï¼Œæ–‡ä»¶è¢«åˆ†å‰²æˆå¾ˆå¤šå—ï¼Œä½¿ç”¨å†—ä½™çš„æ–¹å¼å‚¨å­˜äºå•†ç”¨æœºå™¨é›†ç¾¤ä¸Š

- é›†ç¾¤ç”±æ¯ä¸€ä¸ªå•ä¸ªçš„masterå’Œå¥½å¤šä¸ª chunkserver
- æ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½æ˜¯ä¸€ä¸ªæ™®é€šçš„Linuxè®¡ç®—æœºï¼Œè¿è¡Œçš„æ˜¯ä¸€ä¸ªç”¨æˆ·çº§åˆ«ï¼ˆuser-levelï¼‰çš„æœåŠ¡å™¨è¿›ç¨‹
- åœ¨GFSä¸‹ï¼Œæ¯ä¸€ä¸ªæ–‡ä»¶éƒ½æ‹†æˆå›ºå®šå¤§å°çš„chunk(å—)
  - æ¯ä¸€ä¸ªå—éƒ½æ˜¯ç”±masteræ ¹æ®åˆ›å»ºçš„æ—¶é—´äº§ç”Ÿä¸€ä¸ªå…¨å±€å”¯ä¸€çš„ä»¥åä¸ä¼šæ”¹å˜çš„64ä½çš„ chunk handle æ ‡å¿—
- Chunkservers
  - åœ¨æœ¬åœ°ç£ç›˜ä¸Šç”¨Linuxæ–‡ä»¶ç³»ç»Ÿä¿å­˜è¿™äº›å—
  - å¹¶ä¸”æ ¹æ® chunk handle å’Œå­—èŠ‚åŒºé—´ï¼Œé€šè¿‡Linuxæ–‡ä»¶ç³»ç»Ÿè¯»å†™è¿™ä¸ªå—çš„æ•°æ®
- å¤„äºå¯é æ€§çš„è€ƒè™‘
  - æ¯ä¸€ä¸ªå—éƒ½ä¼šåœ¨ä¸åŒçš„chunkserverä¸Šä¿å­˜å¤‡ä»½ã€‚ç¼ºçœæƒ…å†µä¸‹ï¼Œä¿å­˜3ä¸ªå¤‡ä»½
- ä¸ºé¿å…å•masterå•ç‚¹å¤±æ•ˆ
  - Google å…è®¸ä¸€ä¸ªGFSé›†ç¾¤ä¸­æœ‰å¤šä¸ªbackup masterå­˜åœ¨
  - å½“masterå¤±æ•ˆï¼Œé€šè¿‡Chubby é”æœåŠ¡é€‰æ‹©ä¸€ä¸ªbackup masterä½œä¸ºmaster

GFSç”±ä¸€ä¸ªmasterå’Œå¤§é‡çš„chunkserveræ„æˆã€‚Googleè®¾ç½®ä¸€ä¸ªmasteræ¥ä¿å­˜ç›®å½•å’Œç´¢å¼•ä¿¡æ¯ï¼Œè¿™æ˜¯ä¸ºäº†ç®€åŒ–ç³»ç»Ÿç»“æœï¼Œæé«˜æ€§èƒ½æ¥è€ƒè™‘çš„ï¼Œä½†æ˜¯è¿™å°±ä¼šé€ æˆä¸»æˆä¸ºå•ç‚¹æ•…éšœæˆ–è€…ç“¶é¢ˆã€‚ä¸ºäº†æ¶ˆé™¤ä¸»çš„å•ç‚¹æ•…éšœGoogleæŠŠæ¯ä¸ªchunkè®¾ç½®çš„å¾ˆå¤§(64M)ï¼Œè¿™æ ·ï¼Œç”±äºä»£ç è®¿é—®æ•°æ®çš„æœ¬åœ°æ€§ï¼Œapplicationç«¯å’Œmasterçš„äº¤äº’ä¼šå‡å°‘ï¼Œè€Œä¸»è¦æ•°æ®æµé‡éƒ½æ˜¯Applicationå’Œchunkserverä¹‹é—´çš„è®¿é—®ã€‚

å¦å¤–ï¼Œmasteræ‰€æœ‰ä¿¡æ¯éƒ½å­˜å‚¨åœ¨å†…å­˜é‡Œ,å¯åŠ¨æ—¶ä¿¡æ¯ä»chunkserverä¸­è·å–ã€‚æé«˜äº†masterçš„æ€§èƒ½å’Œååé‡ï¼Œä¹Ÿæœ‰åˆ©äºmasterå½“æ‰åï¼Œå¾ˆå®¹æ˜“æŠŠåå¤‡jæœºå™¨åˆ‡æ¢æˆmasterã€‚å®¢æˆ·ç«¯å’Œchunkserveréƒ½ä¸å¯¹æ–‡ä»¶æ•°æ®å•ç‹¬åšç¼“å­˜ï¼Œåªæ˜¯ç”¨linuxæ–‡ä»¶ç³»ç»Ÿè‡ªå·±çš„ç¼“å­˜ã€‚



### ![image-20211204202819147](imgs/image-20211204202819147.png)**ä»é—®é¢˜å…¥æ‰‹ï¼š**

1ã€å¦‚ä½•ä¿å­˜ä¸€ä¸ªæ–‡ä»¶ï¼š

æœ‰ä¸€ä¸ªç¡¬ç›˜ï¼Œç¡¬ç›˜ä¼šæœ‰ä¸€äº›åŸå§‹ä¿¡æ¯ï¼Œæ¯”å¦‚è¯´æ–‡ä»¶åç§°ï¼Œåˆ›å»ºæ—¶é—´ï¼Œæ–‡ä»¶å¤§å°ï¼Œè¿™äº›éƒ½æ˜¯æ•°æ®ï¼Œä¸ºäº†å¯»æ‰¾åˆ°è¿™äº›æ•°æ®åœ¨ç¡¬ç›˜ä¸­çš„ä½ç½®ï¼Œå°±ä¼šæœ‰ä¸€ä¸ªç´¢å¼•ï¼Œæœ‰äº†ç´¢å¼•å°±å¯ä»¥æ‰¾åˆ°è¿™ä¸ªæ•°æ®åœ¨ç¡¬ç›˜ä¸­çš„ä½ç½®äº†ã€‚1block = 1024byte

2ã€å¦‚ä½•ä¿å­˜ä¸€ä¸ªå¤§æ–‡ä»¶ï¼š

æˆ‘ä»¬éœ€è¦ä¸€ä¸ªChunkï¼Œ1chunk = 64MB=64*2014=64536blocksï¼Œä¼˜ç‚¹ï¼šå‡å°‘å…ƒæ•°æ®ï¼Œå‡å°‘æµé‡ã€‚ç¼ºç‚¹ï¼šå°æ–‡ä»¶ä¼šæµªè´¹ç©ºé—´

3ã€å¦‚ä½•ä¿å­˜ä¸€ä¸ªè¶…å¤§æ–‡ä»¶ï¼š

å•æœº1chunkä¿å­˜ä¸ä¸‹äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±éœ€è¦ä¸€ä¸ªä¸»ä»ç»“æ„ï¼ŒMaster ä¿å­˜å…ƒæ•°æ®ï¼ˆmetaDataï¼‰ï¼Œæ–‡ä»¶åã€å¤§å°ã€åˆ›å»ºæ—¶é—´ã€‚è¿˜ä¼šæœ‰indexï¼Œç„¶åå†æ¥ä¸¤ä¸ª ChunkServerï¼Œç´¢å¼•æŒ‡å‘ ChunkServerï¼Œå…³é”®ç‚¹å°±æ˜¯ä¸€ä¸ªMaster + many ChunkServersã€‚ç¼ºç‚¹ï¼šChunkserveræ•°æ®çš„æ”¹å˜éƒ½éœ€è¦é€šçŸ¥ Masterã€‚

4ã€å‡å°‘Masterçš„æ•°æ®å’Œæµé‡ï¼š

ç³»ç»Ÿè®¾è®¡åŸåˆ™ï¼šè€¦åˆå’Œèšåˆï¼Œåªéœ€è¦æŠŠå±äºä»–çš„æ”¾åœ¨ä»–è¿™é‡Œï¼Œä¸å±äºä»–çš„æ”¾ç»™åˆ«äººã€‚Master ä¸è®°å½•æ¯å—æ•°æ®çš„åç§»é‡ã€‚ä¼˜ç‚¹ï¼šå‡å°‘ Master çš„å…ƒæ•°æ®ä¿¡æ¯ã€‚2ã€å‡å°‘ Master å’Œ ChunkServer ä¹‹é—´çš„é€šä¿¡ã€‚

5ã€å‘ç°æ•°æ®æŸåï¼š

ä¼šæœ‰ä¸€ä¸ªæœºåˆ¶é‰´å®šå‡ºæ•°æ®æŸåï¼Œchunk é‡Œé¢å­˜åœ¨ä¸€ä¸ªä¸€ä¸ªçš„Blockå°å—ï¼Œå¤§å°ä¸º64kbã€‚æ¯ä¸€ä¸ªblockä¿å­˜ä¸€ä¸ªå°å°çš„CheckSum(32bit)ï¼Œblocké‡Œé¢çš„æ•°æ®é€šè¿‡æŸç§ç®—æ³•è®¡ç®—ä¸€ä¸‹ï¼Œå¦‚æœå’Œè¿™ä¸ªCheckSumä¸ä¸€æ ·ï¼Œé‚£ä»–å°±æ˜¯é”™è¯¯çš„ã€‚é‚£ä¼šä¸ä¼šæ‹…å¿ƒè¿™ä¸ªå¾ˆå¤§ï¼Œä¼šå ç”¨ç©ºé—´ã€‚å…¶å®å¯ä»¥è®¡ç®—ä¸€ä¸‹ï¼š1T / 64kb*32bit = 64MBã€‚

6ã€å¦‚ä½•å‡å°‘ ChunkServer æŒ‚æ‰å¸¦æ¥çš„æŸå¤±ï¼Ÿ

å¤åˆ¶ ChunkServerï¼Œåˆ›å»ºå‰¯æœ¬ï¼š3ä¸ªã€‚å¦‚ä½•é€‰æ‹©ä¸€ä¸ªChunkServerï¼šæˆ‘ä»¬å¯ä»¥è¯´è½®è¯¢ï¼Œä½†æ˜¯è¿›ä¸€æ­¥å¯ä»¥ï¼šç¡¬ç›˜åˆ©ç”¨ç‡ä½ã€æ•°æ®å—ä¸è¦éƒ½å†™å…¥åˆ°ä¸€ä¸ªChunkServerä¸Šï¼ˆloadBanlanceï¼‰ã€è·¨æœºæ¶è·¨ä¸­å¿ƒï¼š2+1

7ã€å¦‚æœChunkServerå‘ç°è‡ªèº«ä¿¡æ¯ä¸å‡†ç¡®æˆ–è€…æŒ‚æ‰å‘¢ï¼Ÿ

å¯ä»¥å‘Masterå‘é€è¯·æ±‚ï¼Œç„¶åMasterå‘Šè¯‰ä»–ä½ å¯ä»¥å“ªä¸ªchunkserverå¤åˆ¶æ•°æ®ã€‚è¿™ä¸ªæ—¶å€™chunkserver å’Œ masterä¹‹é—´ä¼šæœ‰ä¸€ä¸ªå¿ƒè·³æ„Ÿåº”ã€‚

å¦‚æœæ„Ÿå—ä¸åˆ°äº†ï¼Œmasterå°±ä¼šè®©å…¶ä»–çš„chunkserver ping ä¸€ä¸‹æ²¡æœ‰å¿ƒè·³çš„å“ªä¸ªchunkserverã€‚å¦‚æœç¡®å®æ²¡æœ‰äº†ï¼ŒMasterä¼šæœ‰ä¸€ä¸ªä¿®å¤è¿›ç¨‹ï¼Œè®°å½•äº†æ¯ä¸€ä¸ªchunkserverå­˜æ´»çš„æ•°é‡ï¼Œå…ˆä»å­˜æ´»æœ€å°‘çš„å¼€å§‹ä¿®å¤ã€‚

### **chunkServer ä¸ºä»€ä¹ˆè®¾è®¡ä¸º 64M ?**

ç­”ï¼š

### **ä¸ºä»€ä¹ˆ chunkServer è¦å¤åˆ¶3ä¸ªå‰¯æœ¬**

é€‰æ‹©è¿™ä¸ªæ•°å­—æ˜¯ä¸ºäº†æœ€å¤§é™åº¦åœ°é™ä½ä¸€ä¸ªå—åçš„æ¦‚ç‡

ç­”ï¼š

2000å¹´å Google å…¬å¸ƒä¸‹ä¸€ä»£åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ

## 2ã€BigTableï¼ˆBigtable: A Distributed Storage System for Structured Dataï¼‰ï¼ˆ2006å¹´ï¼‰

[Google-Bigtableä¸­æ–‡ç‰ˆ_1.0.pdf](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/bdedd77d-e9f4-45b4-8897-f77f5536e7c4/Google-Bigtable_1.0.pdf)

### å‰æ

Bigtableå‘å¸ƒäº2006å¹´ï¼Œå¯å‘äº†æ— æ•°çš„NoSQLæ•°æ®åº“ï¼Œæ¯”å¦‚ï¼šCassandraã€HBaseç­‰ç­‰ã€‚Cassandraæ¶æ„ä¸­æœ‰ä¸€åŠæ˜¯æ¨¡ä»¿Bigtableï¼ŒåŒ…æ‹¬äº†æ•°æ®æ¨¡å‹ã€SSTablesä»¥åŠæå‰å†™æ—¥å¿—ï¼ˆå¦ä¸€åŠæ˜¯æ¨¡ä»¿Amazonçš„Dynamoæ•°æ®åº“ï¼Œä½¿ç”¨ç‚¹å¯¹ç‚¹é›†ç¾¤æ¨¡å¼ï¼‰

BigTable æ˜¯å»ºç«‹åœ¨ GFS å’Œ MapReduce ä¹‹ä¸Šçš„ã€‚æ¯ä¸ªTableéƒ½æ˜¯ä¸€ä¸ªå¤šç»´çš„ç¨€ç–å›¾

ä¸ºäº†ç®¡ç†å·¨å¤§çš„Tableï¼ŒæŠŠTableæ ¹æ®è¡Œåˆ†å‰²ï¼Œè¿™äº›åˆ†å‰²åçš„æ•°æ®ç»Ÿç§°ä¸ºï¼šTabletsã€‚æ¯ä¸ªTabletså¤§æ¦‚æœ‰ 100-200 MBï¼Œæ¯ä¸ªæœºå™¨å­˜å‚¨100ä¸ªå·¦å³çš„ Tabletsã€‚åº•å±‚çš„æ¶æ„æ˜¯ï¼šGFSã€‚

ç”±äºGFSæ˜¯ä¸€ç§åˆ†å¸ƒå¼çš„æ–‡ä»¶ç³»ç»Ÿï¼Œé‡‡ç”¨Tabletsçš„æœºåˆ¶åï¼Œå¯ä»¥è·å¾—å¾ˆå¥½çš„è´Ÿè½½å‡è¡¡ã€‚æ¯”å¦‚ï¼šå¯ä»¥æŠŠç»å¸¸å“åº”çš„è¡¨ç§»åŠ¨åˆ°å…¶ä»–ç©ºé—²æœºå™¨ä¸Šï¼Œç„¶åå¿«é€Ÿé‡å»ºã€‚

### **æ˜¯ä»€ä¹ˆ**

Bigtable æ˜¯ä¸€ç§å‹ç¼©çš„ã€é«˜æ€§èƒ½çš„ã€é«˜å¯æ‰©å±•æ€§çš„ï¼ŒåŸºäº Google æ–‡ä»¶ç³»ç»Ÿï¼ˆGoogle File Systemï¼ŒGFSï¼‰çš„**æ•°æ®å­˜å‚¨ç³»ç»Ÿ**ï¼Œç”¨äºå­˜å‚¨å¤§è§„æ¨¡ç»“æ„åŒ–æ•°æ®ï¼Œé€‚ç”¨äºäº‘ç«¯è®¡ç®—ã€‚

Bigtable çš„è®¾è®¡æ˜¯ä¸ºäº†èƒ½å¯é åœ°å¤„ç† PB çº§çš„æµ·é‡æ•°æ®ï¼Œä½¿å…¶èƒ½å¤Ÿéƒ¨ç½²åœ¨åƒå°æœºå™¨ä¸Šã€‚Bigtable å€Ÿé‰´äº† **parallel databasesï¼ˆå¹¶è¡Œæ•°æ®åº“ï¼‰**å’Œ **main-memory databases(å†…å­˜æ•°æ®åº“)**çš„ä¸€äº›ç‰¹æ€§ï¼Œä½†æ˜¯æä¾›äº†ä¸€ä¸ªå®Œå…¨ä¸åŒæ¥å£ï¼š

- ä¸æ”¯æŒå®Œæ•´çš„å…³ç³»æ•°æ®æ¨¡å‹ï¼Œåªä¸ºç”¨æˆ·æä¾›ç®€å•çš„æ•°æ®æ¨¡å‹ï¼›
- æ¨¡å‹æ”¯æŒåŠ¨æ€æ§åˆ¶æ•°æ®çš„åˆ†å¸ƒå’Œæ ¼å¼ï¼Œåœ¨ Bigtable ä¸­ï¼Œæ•°æ®å¹¶æ²¡æœ‰å›ºå®šçš„æ ¼å¼ï¼Œç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰æ•°æ®çš„ schemaï¼›
- å…è®¸å®¢æˆ·æœºè‡ªå·±æ¨æ–­ï¼ˆreasonï¼‰åº•å±‚æ•°æ®å­˜å‚¨çš„ locality propertiesï¼›
- æ”¯æŒä½¿ç”¨åˆ—åæˆ–è€…è¡Œåä½œä¸ºç´¢å¼•ï¼Œåå­—å¯ä»¥æ˜¯ä»»æ„å­—ç¬¦ä¸²ï¼›
- å°†æ•°æ®è§†ä¸ºæœªè§£é‡Šçš„å­—ç¬¦ä¸²ï¼Œå°½ç®¡å®¢æˆ·ç«¯æœªå¿…çœŸçš„å°±æ˜¯ç”¨å­—ç¬¦ä¸²æ ¼å¼è¿›è¡Œå­˜å‚¨ï¼Œæ¯”å¦‚å®¢æˆ·ç«¯ç»å¸¸å°†å„ç§ structured and semi-structuredï¼ˆç»“æ„åŒ–å’ŒåŠç»“æ„åŒ–ï¼Œå®ƒä»¬ä¸æ˜¯çº¯æ–‡æœ¬ï¼‰çš„åºåˆ—åŒ–åˆ° BitTable çš„å­—ç¬¦ä¸²ä¸­ï¼›
- å…è®¸å®¢æˆ·ç«¯åŠ¨æ€æ§åˆ¶ BitTable çš„æ•°æ®æ¥æºï¼šå†…å­˜ or ç£ç›˜ï¼›

æ­£å¦‚è®ºæ–‡å¼•è¨€æ‰€æè¿°çš„é‚£æ ·ï¼ŒBigtable å®ç°äº†å¦‚ä¸‹å››ä¸ªç›®æ ‡ï¼š

- Wide Applicability - å¹¿æ³›çš„é€‚ç”¨æ€§ï¼›
- Scalability - å¯ä¼¸ç¼©æ€§ï¼ˆç‰¹æŒ‡æ¨ªå‘ï¼‰ï¼›
- High Performance - é«˜æ€§èƒ½ï¼›
- High Availability - é«˜å¯ç”¨æ€§ï¼›

Bigtable è®ºæ–‡å£°ç§° Google Bigtable åœ¨å…¶å…¬å¸å†…éƒ¨åº”ç”¨ååˆ†å¹¿æ³›ï¼ŒåŸºäºå®ƒè®¾è®¡çš„åº”ç”¨ç¨‹åºæœ‰ Google Analytics, Google Finance, Orkut, Search, Writely, and Google Earthã€‚å½“ç„¶ï¼Œæ—¶è‡³ä»Šæ—¥ï¼ˆè®ºæ–‡ 2006 å¹´å‘è¡¨ï¼‰ä¸Šé¢éƒ¨åˆ†åº”ç”¨å·²ç»åœæ­¢æœåŠ¡äº†ã€‚è¿™äº›åº”ç”¨åœ¨å¦‚ä½•ä½¿ç”¨ Bigtable ä¸Šä¹Ÿæœ‰æ‰€åŒºåˆ«ï¼š

- **æ•°æ®æ ¼å¼ä¸åŒ**ï¼šä¸åŒçš„åº”ç”¨ä¹‹é—´å­˜åœ¨è®¸å¤šç±»ä¼¼çš„æ•°æ®æ ¼å¼ï¼Œä½†æ˜¯åŒæ—¶ä¹Ÿæœ‰ç€å„è‡ªçš„æ•°æ®æ ¼å¼ä¾§é‡ï¼Œæ¯”å¦‚ï¼šURLã€ç½‘é¡µå†…å®¹ã€Web ç´¢å¼•ã€å«æ˜Ÿå›¾åƒï¼›
- **ååé‡å’Œå»¶è¿Ÿçš„ä¸åŒä¾§é‡**ï¼šåŸºäº BitTable çš„æœåŠ¡æ—¢æ¶‰åŠé¢å‘ååé‡çš„æ‰¹å¤„ç†ä½œä¸šï¼Œåˆå›Šæ‹¬äº†é¢å‘ç»ˆç«¯ç”¨æˆ·çš„å»¶è¿Ÿæ•æ„Ÿæ•°æ®æœåŠ¡ï¼›
- **é›†ç¾¤è§„æ¨¡ä¸åŒ**ï¼šè¿™äº›æœåŠ¡æœ‰çš„åŸºäºæ‹¥æœ‰å°‘é‡ä¸»æœºçš„ Bigtable é›†ç¾¤ï¼Œæœ‰çš„åŸºäºæ‹¥æœ‰æ•°åƒå°ä¸»æœºçš„ Bigtable é›†ç¾¤ï¼›

### **è§†å›¾é€»è¾‘**

![image-20211204202913279](imgs/image-20211204202913279.png)

### **BTæ¶æ„**

![image-20211204202951218](imgs/image-20211204202951218.png)

## 3ã€MapReduceï¼ˆMapReduce: Simplified Data Processing onLarge Clustersï¼‰ï¼ˆ2004å¹´ï¼‰

[Google-MapReduceä¸­æ–‡ç‰ˆ_1.0.pdf](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/f5bb308d-5a71-4699-aed8-f1ebd82c6301/Google-MapReduce_1.0.pdf)

### **æ¦‚è§ˆ**

MapReduce çš„æœ¬è´¨æ˜¯ä¸€ç§ç¼–ç¨‹æ¨¡å‹ï¼Œæ˜¯ä¸€ç§ç¼–ç¨‹æ–¹æ³•ï¼ŒæŠ½è±¡ç†è®ºï¼Œå…¶ä¸»è¦ç”¨äºå¤§è§„æ¨¡æ•°æ®é›†çš„å¹¶è¡Œè¿ç®—ã€‚å®ƒæå¤§åœ°æ–¹ä¾¿äº†ç¼–ç¨‹äººå‘˜åœ¨ä¸ä¼šåˆ†å¸ƒå¼å¹¶è¡Œç¼–ç¨‹çš„æƒ…å†µä¸‹ï¼Œå°†è‡ªå·±çš„ç¨‹åºè¿è¡Œåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸Šã€‚

MapReduce åœ¨ä»¥ä¸‹èƒŒæ™¯ä¸‹äº§ç”Ÿï¼šå•æœºç³»ç»Ÿæ— æ³•å¤„ç†æµ·é‡æ•°æ®ï¼Œåœ¨å„å¤§äº’è”ç½‘å…¬å¸å·²ç»å¹¿æ³›é‡‡ç”¨åˆ†å¸ƒå¼ç³»ç»Ÿï¼Œä½†æ˜¯ç¼ºå°‘åŒä¸€çš„èŒƒå¼æ¥ç®€åŒ–é—®é¢˜ï¼Œå¯¼è‡´åªæœ‰å°‘æ•°çš„æŠ€æœ¯å¤§ç‰›æ‰èƒ½å†™å‡ºã€æ­å»ºå‡ºè‰¯å¥½çš„åˆ†å¸ƒå¼ç³»ç»Ÿã€‚

å¤§æ•°æ®çš„åˆ†å¸ƒå¼è®¡ç®—æ–¹å¼ï¼Œä¸»è¦æ€æƒ³æ˜¯å°†ä»»åŠ¡åˆ†è§£ç„¶ååœ¨å¤šå°å¤„ç†èƒ½åŠ›è¾ƒå¼±çš„è®¡ç®—èŠ‚ç‚¹ä¸­åŒæ—¶å¤„ç†ï¼Œç„¶åå°†ç»“æœåˆå¹¶ä»è€Œå®Œæˆå¤§æ•°æ®å¤„ç†

Mapreduceæ˜¯é’ˆå¯¹åˆ†å¸ƒå¼å¹¶è¡Œè®¡ç®—çš„ä¸€å¥—ç¼–ç¨‹æ¨¡å‹ã€‚

è®²åˆ°å¹¶è¡Œè®¡ç®—ï¼Œå°±ä¸èƒ½ä¸è°ˆåˆ°å¾®è½¯çš„Herb Sutteråœ¨2005å¹´å‘è¡¨çš„æ–‡ç« â€ The Free Lunch Is Over: A Fundamental Turn Toward Concurrency in Softwareâ€ï¼Œä¸»è¦æ„æ€æ˜¯é€šè¿‡æé«˜cpuä¸»é¢‘çš„æ–¹å¼æ¥æé«˜ç¨‹åºçš„æ€§èƒ½å¾ˆå¿«å°±è¦è¿‡å»äº†ï¼Œcpuçš„è®¾è®¡æ–¹å‘ä¹Ÿä¸»è¦æ˜¯å¤šæ ¸ã€è¶…çº¿ç¨‹ç­‰å¹¶å‘ä¸Šã€‚ä½†æ˜¯ä»¥å‰çš„ç¨‹åºå¹¶ä¸èƒ½è‡ªåŠ¨çš„å¾—åˆ°å¤šæ ¸çš„å¥½å¤„ï¼Œåªæœ‰ç¼–å†™å¹¶å‘ç¨‹åºï¼Œæ‰èƒ½çœŸæ­£è·å¾—å¤šæ ¸çš„å¥½å¤„ã€‚åˆ†å¸ƒå¼è®¡ç®—ä¹Ÿæ˜¯ä¸€æ ·ã€‚

Mapreduceç”±Mapå’Œreduceç»„æˆ,æ¥è‡ªäºLispï¼ŒMapæ˜¯å½±å°„ï¼ŒæŠŠæŒ‡ä»¤åˆ†å‘åˆ°å¤šä¸ªworkerä¸Šå»ï¼Œreduceæ˜¯è§„çº¦ï¼ŒæŠŠMapçš„workerè®¡ç®—å‡ºæ¥çš„ç»“æœåˆå¹¶ã€‚Mapreduceä½¿ç”¨GFSå­˜å‚¨æ•°æ®ã€‚

MapReduce æ˜¯ä¸€ä¸ªç¼–ç¨‹æ¨¡å‹ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªå¤„ç†å’Œç”Ÿæˆè¶…å¤§æ•°æ®é›†çš„ç®—æ³•æ¨¡å‹çš„ç›¸å…³å®ç°ã€‚ç”¨æˆ·é¦–å…ˆåˆ›å»ºä¸€ä¸ª Mapå‡½æ•°å¤„ç†ä¸€ä¸ªåŸºäºkey/value pair çš„æ•°æ®é›†åˆï¼Œè¾“å‡ºä¸­é—´çš„åŸºäºkey/valuepair çš„æ•°æ®é›†åˆ;ç„¶åå†åˆ›å»ºä¸€ä¸ª Reduceå‡½æ•°ç”¨æ¥åˆå¹¶æ‰€æœ‰çš„å…·æœ‰ç›¸åŒä¸­é—´keyå€¼çš„ä¸­é—´valueå€¼ ã€‚

MapReduceæ¶æ„çš„ç¨‹åºèƒ½å¤Ÿåœ¨å¤§é‡çš„æ™®é€šé…ç½®çš„è®¡ç®—æœºä¸Šå®ç°å¹¶è¡ŒåŒ–å¤„ç†ã€‚è¿™ä¸ªç³»ç»Ÿåœ¨è¿è¡Œæ—¶åªå…³å¿ƒ:å¦‚ä½•åˆ†å‰²è¾“å…¥æ•°æ®ï¼Œåœ¨å¤§é‡è®¡ç®—æœºç»„æˆçš„é›†ç¾¤ä¸Šçš„è°ƒåº¦ï¼Œé›†ç¾¤ä¸­è®¡ç®—æœºçš„é”™è¯¯å¤„ç†ï¼Œç®¡ç†é›†ç¾¤ä¸­è®¡ç®—æœºä¹‹é—´å¿…è¦çš„é€šä¿¡ã€‚é‡‡ç”¨ MapReduceæ¶æ„å¯ä»¥ä½¿é‚£äº›æ²¡æœ‰å¹¶è¡Œè®¡ç®—å’Œåˆ†å¸ƒå¼å¤„ç†ç³»ç»Ÿå¼€å‘ç»éªŒçš„ç¨‹åºå‘˜æœ‰æ•ˆåˆ©ç”¨åˆ†å¸ƒå¼ç³»ç»Ÿçš„ä¸°å¯Œèµ„æºã€‚

### **mpæ¶æ„**

![image-20211204203057118](imgs/image-20211204203057118.png)

æœ¬æ–‡å‚è€ƒï¼š

> https://zhuanlan.zhihu.com/p/32172999

> https://static.googleusercontent.com/media/research.google.com/zh-CN//archive/mapreduce-osdi04.pdf

> https://www.youtube.com/watch?v=EpIgvowZr00&t=23s&ab_channel=MIT6.824%3ADistributedSystems

> https://www.youtube.com/watch?v=WLad7CCexo8&t=1s&ab_channel=BitTigerå®˜æ–¹é¢‘é“BitTigerOfficialChannel